(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-login"],{"05ed":function(t,e,n){"use strict";var i=n("47ec"),s=n.n(i);s.a},1771:function(t,e,n){"use strict";function i(t){var e=/^[1][34578]\d{9}$/;return e.test(t)}function s(t){return 4===t.length}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}))},2432:function(t,e,n){},"365c":function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c}));var i=n("751a"),s=function(t){return i["a"].get("/login/code",t)},o=function(t){return i["a"].get("/login/modifyPasswordCode",t)},a=function(t){return i["a"].post("/login/code",t)},l=function(t){return i["a"].post("/login/password",t)},c=function(t){return i["a"].put("/login/modifyPassword",t)}},"3c86":function(t,e,n){},"3e16":function(t,e,n){"use strict";var i=n("2432"),s=n.n(i);s.a},"47ec":function(t,e,n){},"4a82":function(t,e,n){"use strict";var i=n("dfff"),s=n.n(i);s.a},"504d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar"),n("section",{staticStyle:{padding:"30px 30px",display:"flex","flex-flow":"column nowrap"}},[n("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("找回密码")]),n("div",[t._v("验证码已通过短信发送至+86 "+t._s(t.tel)+"。密码为8-20位，至少包含数字、字母、符号两种组合")]),n("div",[n("van-cell-group",[n("van-field",{ref:"code",staticStyle:{"background-color":"WhiteSmoke"},attrs:{clearable:"",placeholder:"请输入验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[n("van-button",{attrs:{slot:"button",size:"small",type:"default",disabled:t.disabled},on:{click:t.sendCode},slot:"button"},[t._v(t._s(t.text))])],1),n("van-field",{staticStyle:{"background-color":"WhiteSmoke"},attrs:{center:"",clearable:"",placeholder:"请输入要修改的密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errMsg,expression:"errMsg"}],staticStyle:{color:"red"}},[t._v(t._s(t.errMsg))])],1),n("div",{staticStyle:{"background-color":"DarkGray"}},[n("van-button",{attrs:{type:t.type,block:"",disabled:t.loginDisabled},on:{click:t.login}},[t._v("完成")])],1)])],1)},s=[],o=(n("ac1f"),n("5319"),n("d000")),a=n("365c"),l=n("1771"),c=n("d399"),r={name:"LoginByPwd",components:{NavBar:o["a"]},mounted:function(){this.$refs.code.focus()},watch:{code:function(t,e){this.code=this.code.replace(/\s+/g,"").replace(/\D/g,""),(isNaN(t)||t.length>4)&&(this.code=e),Object(l["a"])(t)&&this.pwd.length>0?(this.type="danger",this.loginDisabled=!1):(this.type="default",this.loginDisabled="disabled")},pwd:function(t){Object(l["a"])(this.code)&&t.length>0?(this.type="danger",this.loginDisabled=!1):(this.type="default",this.loginDisabled="disabled")}},data:function(){return{loginDisabled:"disabled",type:"default",errMsg:"",tel:this.$store.state.phone,code:"",pwd:"",disabled:"disabled",text:""}},methods:{login:function(){var t=this,e={phone:this.tel,code:this.code,password:this.pwd};Object(a["c"])(e).then((function(e){200!==e.code?t.errMsg=e.msg:t.$store.commit("login",e.data.token)}))},sendCode:function(){var t={phone:this.tel};Object(a["e"])(t).then((function(t){200===t.code&&Object(c["a"])("验证码发送成功")})),this.timer()},timer:function(){var t=this,e=60;this.text=e;var n=setInterval((function(){if(0===e)return clearInterval(n),t.text="重新发送",void(t.disabled=!1);t.text=--e}),1e3)}},created:function(){this.sendCode()}},d=r,u=(n("9986"),n("2877")),h=Object(u["a"])(d,i,s,!1,null,"fa45cc96",null);e["default"]=h.exports},5132:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar"),n("section",{staticStyle:{padding:"30px 30px",display:"flex","flex-flow":"column nowrap"}},[n("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("请输入验证码")]),n("div",[t._v("验证码已通过短信发送至 "+t._s(t.tel))]),n("div",[n("van-cell-group",[n("van-field",{ref:"code",staticStyle:{"background-color":"WhiteSmoke"},attrs:{center:"",clearable:"",placeholder:"请输入验证码"},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}},[n("van-button",{attrs:{slot:"button",size:"small",type:"default",disabled:t.disabled},on:{click:t.sendCode},slot:"button"},[t._v(t._s(t.text))])],1)],1),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errMsg,expression:"errMsg"}],staticStyle:{color:"red"}},[t._v(t._s(t.errMsg))])],1),n("div",{staticStyle:{"background-color":"DarkGray"}},[n("van-button",{attrs:{type:t.type,block:"",disabled:t.loginDisabled},on:{click:t.login}},[t._v("登录")])],1)])],1)},s=[],o=(n("ac1f"),n("5319"),n("d000")),a=n("1771"),l=n("365c"),c={name:"LoginByCode",components:{NavBar:o["a"]},watch:{sms:function(t,e){this.sms=this.sms.replace(/\s+/g,"").replace(/\D/g,""),(isNaN(t)||t.length>4)&&(this.sms=e),Object(a["a"])(t)?(this.login(),this.type="danger",this.loginDisabled=!1):(this.type="default",this.loginDisabled="disabled")}},mounted:function(){this.$refs.code.focus()},data:function(){return{tel:this.$store.state.phone,sms:"",text:"发送验证码",disabled:!1,loginDisabled:"disabled",type:"default",errMsg:""}},methods:{login:function(){var t=this,e={phone:this.tel,code:this.sms};Object(l["a"])(e).then((function(e){200!==e.code?t.errMsg=e.msg:t.$store.commit("login",e.data)}))},sendCode:function(){var t=this,e={phone:this.tel};Object(l["d"])(e).then((function(e){200===e.code&&(t.disabled="disabled",t.timer())}))},timer:function(){var t=this,e=60;this.text=e;var n=setInterval((function(){if(0===e)return clearInterval(n),t.text="重新发送",void(t.disabled=!1);t.text=--e}),1e3)}},created:function(){this.sendCode()}},r=c,d=(n("05ed"),n("2877")),u=Object(d["a"])(r,i,s,!1,null,"df026480",null);e["default"]=u.exports},6038:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar"),n("section",{staticStyle:{padding:"30px 30px",display:"flex","flex-flow":"column nowrap"}},[n("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("手机号密码登录")]),n("div",[n("van-cell-group",[n("van-field",{ref:"phone",staticStyle:{"background-color":"WhiteSmoke"},attrs:{clearable:"",placeholder:"请输入手机号"},on:{blur:t.blur},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),n("van-field",{ref:"pwd",staticStyle:{"background-color":"WhiteSmoke"},attrs:{center:"",clearable:"",placeholder:"请输入密码",type:"password"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errMsg,expression:"errMsg"}],staticStyle:{color:"red"}},[t._v(t._s(t.errMsg))])],1),n("div",{staticStyle:{"background-color":"DarkGray"}},[n("van-button",{attrs:{type:t.type,block:"",disabled:t.loginDisabled},on:{click:t.login}},[t._v("登录")])],1),n("div",[t._v(" 忘记了？ "),n("a",{on:{click:t.toRetrievePwd}},[t._v("找回密码")])])])],1)},s=[],o=(n("ac1f"),n("5319"),n("d000")),a=n("1771"),l=n("365c"),c={name:"LoginByPwd",components:{NavBar:o["a"]},mounted:function(){this.tel?this.$refs.pwd.focus():this.$refs.phone.focus()},watch:{pwd:function(t){Object(a["b"])(this.tel)&&t.length>0?(this.loginDisabled=!1,this.type="danger"):(this.loginDisabled="disabled",this.type="default")},tel:function(t,e){this.tel=this.tel.replace(/\s+/g,"").replace(/\D/g,""),isNaN(t)||t.length>11?this.tel=e:Object(a["b"])(this.tel)&&this.pwd.length>0?(this.loginDisabled=!1,this.type="danger"):(this.loginDisabled="disabled",this.type="default")}},data:function(){return{type:"default",tel:this.$store.state.phone,pwd:"",errMsg:"",loginDisabled:"disabled"}},methods:{blur:function(){Object(a["b"])(this.tel)&&this.$store.commit("updatePhone",this.tel)},login:function(){var t=this,e={phone:this.tel,password:this.pwd};Object(l["b"])(e).then((function(e){200!==e.code?(t.errMsg=e.msg,t.$refs.pwd.focus()):t.$store.commit("login",e.data)}))},toRetrievePwd:function(){Object(a["b"])(this.tel)?(this.$router.push("/retrievePwd"),this.errMsg=""):(this.errMsg="手机号填写错误",this.$refs.phone.focus())}}},r=c,d=(n("4a82"),n("2877")),u=Object(d["a"])(r,i,s,!1,null,"766cc9ac",null);e["default"]=u.exports},9986:function(t,e,n){"use strict";var i=n("3c86"),s=n.n(i);s.a},d000:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-nav-bar",[n("van-icon",{attrs:{slot:"left",name:"arrow-left",color:"#000",size:".46rem"},on:{click:t.back},slot:"left"})],1)},s=[],o={name:"NavBar",methods:{back:function(){this.$router.back()}}},a=o,l=n("2877"),c=Object(l["a"])(a,i,s,!1,null,"0c7e4074",null);e["a"]=c.exports},dfff:function(t,e,n){},ede4:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",[n("van-icon",{attrs:{slot:"left",name:"cross",color:"#000",size:".46rem"},on:{click:t.close},slot:"left"})],1),n("section",{staticStyle:{padding:"30px 30px"}},[n("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("登录后即可正常使用")]),t._m(0),n("div",[n("van-cell-group",[n("van-field",{ref:"phone",staticStyle:{"background-color":"WhiteSmoke"},attrs:{type:"tel",placeholder:"请输入手机号",clearable:""},on:{blur:t.blur},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}})],1)],1),n("div",[t._v("未注册的手机号验证通过后将自动注册")]),n("div",{staticStyle:{"background-color":"DarkGray"}},[n("van-button",{attrs:{type:t.type,disabled:t.disabled,size:"large"},on:{click:t.getCode}},[t._v("获取短信验证码")])],1),n("div",{staticClass:"space-between"},[n("a",{on:{click:t.toPwdLogin}},[t._v("密码登录")]),n("a",{on:{click:function(e){t.show=!0}}},[t._v("其它方式登录")])])]),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{cancel:t.onCancel,select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("登录即代表同意 "),n("a",[t._v("用户协议")]),t._v(" 和 "),n("a",[t._v("隐私协议")])])}],o=(n("ac1f"),n("5319"),n("1771")),a={name:"Login",data:function(){return{tel:this.$store.state.phone,disabled:"disabled",type:"default",show:!1,actions:[{name:"QQ登录",index:0},{name:"微信登录",index:1},{name:"微博登录",index:2}]}},activated:function(){this.$refs.phone.focus(),this.tel=this.$store.state.phone,this.checkPhone(this.tel)},watch:{tel:function(t,e){this.tel=this.tel.replace(/\s+/g,"").replace(/\D/g,""),isNaN(t)||t.length>11?this.tel=e:this.checkPhone(t)}},methods:{checkPhone:function(t){Object(o["b"])(t)?(this.disabled=!1,this.type="danger"):(this.disabled="disabled",this.type="default")},blur:function(){Object(o["b"])(this.tel)&&this.$store.commit("updatePhone",this.tel)},toPwdLogin:function(){this.$router.push("/loginByPwd")},getCode:function(){this.$router.push("/loginByCode")},close:function(){this.$router.back(),this.$store.commit("toggleTabbarShow",!0)},onCancel:function(){this.show=!1},onSelect:function(t){switch(t.index){case 0:console.log("QQ");break;case 1:console.log("微信");break;case 2:console.log("微博");break}this.show=!1}}},l=a,c=(n("3e16"),n("2877")),r=Object(c["a"])(l,i,s,!1,null,"c5a0521a",null);e["default"]=r.exports}}]);
//# sourceMappingURL=group-login.f4861cdf.js.map